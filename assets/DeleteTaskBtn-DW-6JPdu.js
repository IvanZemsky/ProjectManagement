import{l as N,n as V,r as u,o as v,af as we,ag as je,F as m,g as ie,w as ke,y as U,Y as De,J as Re,j as a,D as x,E as L,ah as Te,T as k,L as se,u as Ce,b as X,e as G,S as z,d as O,i as ne,ai as le,ab as ce,h as Me,aj as Ee,ak as Pe,al as Ie,I as J,am as Fe,Q as We,c as $e,s as Be,R as ze}from"./index-M8xitAOu.js";import{t as Y,a as Oe}from"./TaskColumn-D4zwICES.js";import{u as Ae,C as K,F as Q}from"./index.esm-ClhOTKCj.js";import{T as Z,I as ee}from"./TextField-CAPKmTA8.js";import{S as te}from"./Select-4Pf-cQft.js";import{M as P}from"./MenuItem-DlgW24CP.js";function Ne(e){return V("MuiDialog",e)}const I=N("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),ue=u.createContext({}),Ve=v(we,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Ue=e=>{const{classes:t,scroll:r,maxWidth:o,fullWidth:i,fullScreen:s}=e,n={root:["root"],container:["container",`scroll${m(r)}`],paper:["paper",`paperScroll${m(r)}`,`paperWidth${m(String(o))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return L(n,Ne,t)},Le=v(je,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Ye=v("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${m(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),_e=v(ie,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${m(r.scroll)}`],t[`paperWidth${m(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(ke(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${I.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${I.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${I.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),He=u.forwardRef(function(t,r){const o=U({props:t,name:"MuiDialog"}),i=De(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":n,"aria-labelledby":l,BackdropComponent:c,BackdropProps:d,children:y,className:D,disableEscapeKeyDown:S=!1,fullScreen:b=!1,fullWidth:R=!1,maxWidth:w="sm",onBackdropClick:f,onClick:p,onClose:T,open:_,PaperComponent:ge=ie,PaperProps:H={},scroll:me="paper",TransitionComponent:he=Te,transitionDuration:q=s,TransitionProps:ve,...be}=o,j={...o,disableEscapeKeyDown:S,fullScreen:b,fullWidth:R,maxWidth:w,scroll:me},C=Ue(j),M=u.useRef(),xe=g=>{M.current=g.target===g.currentTarget},ye=g=>{p&&p(g),M.current&&(M.current=null,f&&f(g),T&&T(g,"backdropClick"))},E=Re(l),Se=u.useMemo(()=>({titleId:E}),[E]);return a.jsx(Le,{className:x(C.root,D),closeAfterTransition:!0,components:{Backdrop:Ve},componentsProps:{backdrop:{transitionDuration:q,as:c,...d}},disableEscapeKeyDown:S,onClose:T,open:_,ref:r,onClick:ye,ownerState:j,...be,children:a.jsx(he,{appear:!0,in:_,timeout:q,role:"presentation",...ve,children:a.jsx(Ye,{className:x(C.container),onMouseDown:xe,ownerState:j,children:a.jsx(_e,{as:ge,elevation:24,role:"dialog","aria-describedby":n,"aria-labelledby":E,...H,className:x(C.paper,H.className),ownerState:j,children:a.jsx(ue.Provider,{value:Se,children:y})})})})})});function qe(e){return V("MuiDialogActions",e)}N("MuiDialogActions",["root","spacing"]);const Xe=e=>{const{classes:t,disableSpacing:r}=e;return L({root:["root",!r&&"spacing"]},qe,t)},Ge=v("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Je=u.forwardRef(function(t,r){const o=U({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...n}=o,l={...o,disableSpacing:s},c=Xe(l);return a.jsx(Ge,{className:x(c.root,i),ownerState:l,ref:r,...n})});function Ke(e){return V("MuiDialogTitle",e)}N("MuiDialogTitle",["root"]);const Qe=e=>{const{classes:t}=e;return L({root:["root"]},Ke,t)},Ze=v(k,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),et=u.forwardRef(function(t,r){const o=U({props:t,name:"MuiDialogTitle"}),{className:i,id:s,...n}=o,l=o,c=Qe(l),{titleId:d=s}=u.useContext(ue);return a.jsx(Ze,{component:"h2",className:x(c.root,i),ownerState:l,ref:r,variant:"h6",id:s??d,...n})}),tt=se(a.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),rt=({taskId:e,setEditedTask:t})=>{var w;const[r,o]=u.useState(!1),{projectId:i}=Ce();if(!i)return a.jsx(k,{children:"Error"});const s=Y.getById(e);if(!s)return a.jsx(k,{children:"Error"});const n=Ae({defaultValues:{name:s.name,description:s.description,assigneeId:((w=s.assignee)==null?void 0:w.id)||X.Unspecified,status:s.status}}),{register:l,handleSubmit:c,getValues:d,control:y,formState:D,reset:S}=n,b=G.get(),R=()=>{const f={...s,name:d("name").trim(),description:d("description").trim(),assignee:G.getById(d("assigneeId")),status:d("status")};o(!0),t(f),S(f)};return a.jsx("form",{onSubmit:c(R),noValidate:!0,children:a.jsxs(z,{spacing:2,children:[a.jsx(Z,{id:"task-name",label:"Name",variant:"filled",autoFocus:!0,sx:{alignSelf:"flex-start",width:"100%"},size:"small",...l("name",{required:!0})}),a.jsx(Z,{id:"task-description",label:"Description",variant:"filled",sx:{alignSelf:"flex-start",width:"100%"},size:"small",multiline:!0,minRows:3,maxRows:3,...l("description")}),a.jsx(K,{control:y,name:"assigneeId",render:({field:f})=>a.jsxs(Q,{fullWidth:!0,children:[a.jsx(ee,{id:"task-assignee-label",children:"Assignee"}),a.jsxs(te,{id:"task-assignee",labelId:"task-assignee-label",label:"Assignee",...f,sx:{alignSelf:"flex-start",width:"100%"},children:[a.jsx(P,{value:X.Unspecified,children:"Unspecified"}),b==null?void 0:b.data.map(p=>a.jsx(P,{value:p.id,children:p.name},p.id))]})]})}),a.jsx(K,{control:y,name:"status",render:({field:f})=>a.jsxs(Q,{fullWidth:!0,children:[a.jsx(ee,{id:"task-status-label",children:"Status"}),a.jsx(te,{id:"task-status",labelId:"task-status-label",label:"Status",...f,sx:{alignSelf:"flex-start",width:"100%"},children:Oe.map(p=>a.jsx(P,{value:p.id,children:p.label},p.id))})]})}),a.jsxs(z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[a.jsx(O,{variant:"contained",disabled:!D.isDirty,type:"submit",children:"Save"}),r&&a.jsx(k,{color:"success",children:"Changes saved."})]})]})})},Ft=({id:e,name:t,onEditorClose:r,onPointerDown:o})=>{const[i,s]=u.useState(null),n=()=>{i&&Y.update(e,i),r&&r()},{openModal:l,handleModalOpen:c,handleModalClose:d}=ne(!1,n);return a.jsxs(a.Fragment,{children:[a.jsx(le,{title:"Edit",children:a.jsx(ce,{size:"small",onPointerDown:o,onClick:c,children:a.jsx(tt,{})})}),a.jsx(Me,{title:`Edit task '${t}'`,open:l,onClose:d,children:a.jsx(rt,{taskId:e,setEditedTask:s})})]})},at=se(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");if(!u.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Ee)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function ot(e){e()}function it(e){e||(e=ot),Pe({reactionScheduler:e})}function st(e){return Ie(e)}var nt=1e4,lt=1e4,ct=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(o){o===void 0&&(o=nt),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var i=Date.now();r.registrations.forEach(function(s,n){i-s.registeredAt>=o&&(r.finalize(s.value),r.registrations.delete(n))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,o){this.registrations.set(o,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,lt))}}),e}(),ut=typeof FinalizationRegistry<"u"?FinalizationRegistry:ct,A=new ut(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),de={exports:{}},pe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=u;function dt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:dt,ft=h.useState,gt=h.useEffect,mt=h.useLayoutEffect,ht=h.useDebugValue;function vt(e,t){var r=t(),o=ft({inst:{value:r,getSnapshot:t}}),i=o[0].inst,s=o[1];return mt(function(){i.value=r,i.getSnapshot=t,F(i)&&s({inst:i})},[e,r,t]),gt(function(){return F(i)&&s({inst:i}),e(function(){F(i)&&s({inst:i})})},[e]),ht(r),r}function F(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!pt(e,r)}catch{return!0}}function bt(e,t){return t()}var xt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bt:vt;pe.useSyncExternalStore=h.useSyncExternalStore!==void 0?h.useSyncExternalStore:xt;de.exports=pe;var yt=de.exports;function re(e){e.reaction=new Fe("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function St(e,t){t===void 0&&(t="observed");var r=J.useRef(null);if(!r.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(l){return A.unregister(o),o.onStoreChange=l,o.reaction||(re(o),o.stateVersion=Symbol()),function(){var c;o.onStoreChange=null,(c=o.reaction)===null||c===void 0||c.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};r.current=o}var i=r.current;i.reaction||(re(i),A.register(r,i,i)),J.useDebugValue(i.reaction,st),yt.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot);var s,n;if(i.reaction.track(function(){try{s=e()}catch(l){n=l}}),n)throw n;return s}var W,$,fe=typeof Symbol=="function"&&Symbol.for,wt=($=(W=Object.getOwnPropertyDescriptor(function(){},"name"))===null||W===void 0?void 0:W.configurable)!==null&&$!==void 0?$:!1,ae=fe?Symbol.for("react.forward_ref"):typeof u.forwardRef=="function"&&u.forwardRef(function(e){return null}).$$typeof,oe=fe?Symbol.for("react.memo"):typeof u.memo=="function"&&u.memo(function(e){return null}).$$typeof;function jt(e,t){var r;if(oe&&e.$$typeof===oe)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(r=void 0)!==null&&r!==void 0?r:!1,i=e,s=e.displayName||e.name;if(ae&&e.$$typeof===ae&&(o=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var n=function(l,c){return St(function(){return i(l,c)},s)};return n.displayName=e.displayName,wt&&Object.defineProperty(n,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(n.contextTypes=e.contextTypes),o&&(n=u.forwardRef(n)),n=u.memo(n),Dt(e,n),n}var kt={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Dt(e,t){Object.keys(e).forEach(function(r){kt[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var B;it(We.unstable_batchedUpdates);B=A.finalizeAllImmediately;const Rt=jt(({taskId:e,taskName:t,open:r,onClose:o,onDelete:i})=>{const s=()=>{Y.delete(e),i&&i()};return a.jsx(He,{open:r,children:a.jsxs(z,{spacing:2,sx:{p:2},children:[a.jsxs(et,{sx:{p:0,fontSize:20},children:["Are you sure you want to delete task '",t,"'?"]}),a.jsxs(Je,{sx:{p:0,mt:0},children:[a.jsx(O,{color:"primary",variant:"contained",onClick:o,children:"Cancel"}),a.jsx(O,{color:"sensitive",variant:"contained",onClick:s,children:"Delete"})]})]})})}),Wt=({id:e,projectId:t,name:r,onPointerDown:o,redirectOnDelete:i=!1})=>{const s=$e(),n=i&&t?()=>s(Be("",ze.Projects,t)):null,{openModal:l,handleModalOpen:c,handleModalClose:d}=ne(!1);return a.jsxs(a.Fragment,{children:[a.jsx(le,{title:"Delete",children:a.jsx(ce,{size:"small",onPointerDown:o,onClick:c,children:a.jsx(at,{})})}),a.jsx(Rt,{taskId:e,taskName:r,open:l,onClose:d,onDelete:n})]})};export{Wt as D,Ft as E,jt as o};
