import{c,e as o,v as h,b as l,m as f,A as u}from"./index-C-jB6FNB.js";class p{constructor(){this.tasks=[],this.isInitialized=!1,this.getById=s=>this.tasks.find(t=>t.id===s)||null,this.getByProjectId=s=>this.tasks.filter(t=>t.projectId===s),this.getAllWithExecutor=(s,t,e)=>{const i=this.tasks.filter(r=>{var d;return((d=r.assignee)==null?void 0:d.id)===s||r.team.includes(s)}),a=i.length;if(e===void 0||t===void 0)return{data:i,totalCount:a};const n=(t-1)*e;return{data:i.slice(n,n+e),totalCount:a}},this.updateOne=(s,t)=>{const i=t.assigneeId===c.Unspecified?null:o.getById(t.assigneeId),a=this.tasks.find(n=>n.id===s);return a?(Object.assign(a,t,{assignee:i}),a):null},this.update=s=>{const t=this.tasks.findIndex(e=>e.id===s.id);return t!==-1?(this.tasks[t]=s,s):null},this.create=s=>{const e=s.assigneeId===c.Unspecified?null:o.getById(s.assigneeId),i={id:h(),projectId:s.projectId,name:s.name,description:s.description,assignee:e,team:[],status:s.status};return this.tasks.push(i),i},this.delete=s=>{this.tasks=this.tasks.filter(t=>t.id!==s)},this.autosaveState=()=>{l(()=>{this.isInitialized&&u.set("tasks",this.tasks)})},f(this),this.loadTasks(),this.autosaveState()}loadTasks(){this.tasks=u.get("tasks")||[],this.isInitialized=!0}}const v=new p;export{v as t};
