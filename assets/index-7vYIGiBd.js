import{$ as bt,a0 as yt,r as u,G as vt,a1 as wt,q as V,w as F,x as R,D,F as Q,a2 as Ct,a3 as St,H as Rt,j as s,I as W,J as O,a4 as jt,a5 as Et,a6 as ot,k as At,a7 as Dt,V as nt,y as Tt,W as Pt,T as Z,t as tt,S as at,a8 as st,u as kt,i as $t,B as It}from"./index-C-jB6FNB.js";import{p as _}from"./store-4Z5bi62p.js";import{o as dt,T as Mt,a as zt,D as Nt}from"./DeleteTaskBtn-BZkZVHWs.js";import{t as rt}from"./store-D9YZTOGP.js";import{t as Bt}from"./constants-CaX98ONQ.js";import{u as Gt,T as Lt,D as Wt,a as Ht}from"./TaskColumn-Dh9yuy7A.js";import"./index.esm-hwsnyq1X.js";import"./utils-DTIyCc5Y.js";import"./TextField-DlPsTCXm.js";import"./Select-B_KLR2p3.js";import"./MenuItem-BmaKOZhk.js";function Ut(t,e,o,n,i){const[a,d]=u.useState(()=>i&&o?o(t).matches:n?n(t).matches:e);return vt(()=>{if(!o)return;const c=o(t),l=()=>{d(c.matches)};return l(),c.addEventListener("change",l),()=>{c.removeEventListener("change",l)}},[t,o]),a}const Vt={...wt},ct=Vt.useSyncExternalStore;function Ft(t,e,o,n,i){const a=u.useCallback(()=>e,[e]),d=u.useMemo(()=>{if(i&&o)return()=>o(t).matches;if(n!==null){const{matches:p}=n(t);return()=>p}return a},[a,t,n,i,o]),[c,l]=u.useMemo(()=>{if(o===null)return[a,()=>()=>{}];const p=o(t);return[()=>p.matches,f=>(p.addEventListener("change",f),()=>{p.removeEventListener("change",f)})]},[a,o,t]);return ct(l,c,d)}function Qt(t,e={}){const o=bt(),n=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:a=n?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:c=!1}=yt({name:"MuiUseMediaQuery",props:e,theme:o});let l=typeof t=="function"?t(o):t;return l=l.replace(/^@media( ?)/m,""),(ct!==void 0?Ft:Ut)(l,i,a,d,c)}function Ot(t){return F("MuiCollapse",t)}V("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Jt=t=>{const{orientation:e,classes:o}=t,n={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return O(n,Ot,o)},Kt=R("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[o.orientation],o.state==="entered"&&e.entered,o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&e.hidden]}})(D(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Xt=R("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Yt=R("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),q=u.forwardRef(function(e,o){const n=Q({props:e,name:"MuiCollapse"}),{addEndListener:i,children:a,className:d,collapsedSize:c="0px",component:l,easing:m,in:p,onEnter:f,onEntered:y,onEntering:v,onExit:T,onExited:j,onExiting:w,orientation:g="vertical",style:P,timeout:x=jt.standard,TransitionComponent:G=Et,...J}=n,k={...n,orientation:g,collapsedSize:c},b=Jt(k),$=Ct(),K=St(),C=u.useRef(null),I=u.useRef(),M=typeof c=="number"?`${c}px`:c,E=g==="horizontal",A=E?"width":"height",z=u.useRef(null),X=Rt(o,z),N=r=>h=>{if(r){const S=z.current;h===void 0?r(S):r(S,h)}},Y=()=>C.current?C.current[E?"clientWidth":"clientHeight"]:0,pt=N((r,h)=>{C.current&&E&&(C.current.style.position="absolute"),r.style[A]=M,f&&f(r,h)}),ut=N((r,h)=>{const S=Y();C.current&&E&&(C.current.style.position="");const{duration:L,easing:H}=ot({style:P,timeout:x,easing:m},{mode:"enter"});if(x==="auto"){const et=$.transitions.getAutoHeightDuration(S);r.style.transitionDuration=`${et}ms`,I.current=et}else r.style.transitionDuration=typeof L=="string"?L:`${L}ms`;r.style[A]=`${S}px`,r.style.transitionTimingFunction=H,v&&v(r,h)}),mt=N((r,h)=>{r.style[A]="auto",y&&y(r,h)}),ft=N(r=>{r.style[A]=`${Y()}px`,T&&T(r)}),gt=N(j),ht=N(r=>{const h=Y(),{duration:S,easing:L}=ot({style:P,timeout:x,easing:m},{mode:"exit"});if(x==="auto"){const H=$.transitions.getAutoHeightDuration(h);r.style.transitionDuration=`${H}ms`,I.current=H}else r.style.transitionDuration=typeof S=="string"?S:`${S}ms`;r.style[A]=M,r.style.transitionTimingFunction=L,w&&w(r)}),xt=r=>{x==="auto"&&K.start(I.current||0,r),i&&i(z.current,r)};return s.jsx(G,{in:p,onEnter:pt,onEntered:mt,onEntering:ut,onExit:ft,onExited:gt,onExiting:ht,addEndListener:xt,nodeRef:z,timeout:x==="auto"?null:x,...J,children:(r,h)=>s.jsx(Kt,{as:l,className:W(b.root,d,{entered:b.entered,exited:!p&&M==="0px"&&b.hidden}[r]),style:{[E?"minWidth":"minHeight"]:M,...P},ref:X,...h,ownerState:{...k,state:r},children:s.jsx(Xt,{ownerState:{...k,state:r},className:b.wrapper,ref:C,children:s.jsx(Yt,{ownerState:{...k,state:r},className:b.wrapperInner,children:a})})})})});q&&(q.muiSupportAuto=!0);const lt=u.createContext({});function Zt(t){return F("MuiAccordion",t)}const U=V("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),_t=t=>{const{classes:e,square:o,expanded:n,disabled:i,disableGutters:a}=t;return O({root:["root",!o&&"rounded",n&&"expanded",i&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},Zt,e)},qt=R(At,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${U.region}`]:e.region},e.root,!o.square&&e.rounded,!o.disableGutters&&e.gutters]}})(D(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${U.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${U.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),D(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${U.expanded}`]:{margin:"16px 0"}}}]}))),te=R("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(t,e)=>e.heading})({all:"unset"}),ee=u.forwardRef(function(e,o){const n=Q({props:e,name:"MuiAccordion"}),{children:i,className:a,defaultExpanded:d=!1,disabled:c=!1,disableGutters:l=!1,expanded:m,onChange:p,square:f=!1,slots:y={},slotProps:v={},TransitionComponent:T,TransitionProps:j,...w}=n,[g,P]=Dt({controlled:m,default:d,name:"Accordion",state:"expanded"}),x=u.useCallback(X=>{P(!g),p&&p(X,!g)},[g,p,P]),[G,...J]=u.Children.toArray(i),k=u.useMemo(()=>({expanded:g,disabled:c,disableGutters:l,toggle:x}),[g,c,l,x]),b={...n,square:f,disabled:c,disableGutters:l,expanded:g},$=_t(b),K={transition:T,...y},C={transition:j,...v},I={slots:K,slotProps:C},[M,E]=nt("heading",{elementType:te,externalForwardedProps:I,className:$.heading,ownerState:b}),[A,z]=nt("transition",{elementType:q,externalForwardedProps:I,ownerState:b});return s.jsxs(qt,{className:W($.root,a),ref:o,ownerState:b,square:f,...w,children:[s.jsx(M,{...E,children:s.jsx(lt.Provider,{value:k,children:G})}),s.jsx(A,{in:g,timeout:"auto",...z,children:s.jsx("div",{"aria-labelledby":G.props.id,id:G.props["aria-controls"],role:"region",className:$.region,children:J})})]})});function oe(t){return F("MuiAccordionDetails",t)}V("MuiAccordionDetails",["root"]);const ne=t=>{const{classes:e}=t;return O({root:["root"]},oe,e)},se=R("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(D(({theme:t})=>({padding:t.spacing(1,2,2)}))),re=u.forwardRef(function(e,o){const n=Q({props:e,name:"MuiAccordionDetails"}),{className:i,...a}=n,d=n,c=ne(d);return s.jsx(se,{className:W(c.root,i),ref:o,ownerState:d,...a})});function ie(t){return F("MuiAccordionSummary",t)}const B=V("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ae=t=>{const{classes:e,expanded:o,disabled:n,disableGutters:i}=t;return O({root:["root",o&&"expanded",n&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},ie,e)},de=R(Tt,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(D(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${B.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${B.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${B.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${B.expanded}`]:{minHeight:64}}}]}})),ce=R("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(D(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${B.expanded}`]:{margin:"20px 0"}}}]}))),le=R("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(D(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${B.expanded}`]:{transform:"rotate(180deg)"}}))),pe=u.forwardRef(function(e,o){const n=Q({props:e,name:"MuiAccordionSummary"}),{children:i,className:a,expandIcon:d,focusVisibleClassName:c,onClick:l,...m}=n,{disabled:p=!1,disableGutters:f,expanded:y,toggle:v}=u.useContext(lt),T=g=>{v&&v(g),l&&l(g)},j={...n,expanded:y,disabled:p,disableGutters:f},w=ae(j);return s.jsxs(de,{focusRipple:!1,disableRipple:!0,disabled:p,component:"div","aria-expanded":y,className:W(w.root,a),focusVisibleClassName:W(w.focusVisible,c),onClick:T,ref:o,ownerState:j,...m,children:[s.jsx(ce,{className:w.content,ownerState:j,children:i}),d&&s.jsx(le,{className:w.expandIconWrapper,ownerState:j,children:d})]})}),ue=Pt(s.jsx("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown"),me=dt(({projectId:t})=>{const e=_.getById(t),o=_.getTeam(t);return e?s.jsxs(ee,{disableGutters:!0,disabled:!e.description&&!(o!=null&&o.length),sx:{border:"1px solid",borderColor:tt.palette.white.dark},children:[s.jsx(pe,{expandIcon:s.jsx(ue,{}),sx:{fontSize:18},children:"Project information"}),s.jsx(re,{children:s.jsxs(at,{spacing:2,sx:{alignItems:"flex-start"},children:[s.jsx(Z,{children:e.description?"Description":"No description provided"}),o!=null&&o.length?s.jsx(Mt,{team:o}):"Project team is empty"]})})]}):s.jsx(Z,{children:"Error"})}),it=(t,e)=>{if(e)return e.filter(o=>o.status===t)},fe=t=>{if(t)return{transform:`translate(${t.x}px, ${t.y}px)`,zIndex:20,cursor:"grabbing"}},ge=({data:t,draggable:e})=>{const o=Qt(tt.breakpoints.up("lg"))&&e,[n,i]=u.useState(o),{id:a}=t,{attributes:d,listeners:c,setNodeRef:l,transform:m}=Gt({id:a,disabled:!n}),p=fe(m),f=v=>{v.stopPropagation(),i(!1)},y=()=>i(!0);return s.jsx(Lt,{data:t,ref:l,...c,...d,sx:{cursor:n?"grab":"default",...p},editBtn:s.jsx(zt,{id:t.id,name:t.name,onPointerDown:f,onEditorClose:y}),deleteBtn:s.jsx(Nt,{id:t.id,name:t.name,onPointerDown:f})})},he=dt(({projectId:t})=>{const e=rt.getByProjectId(t),o=n=>{const{active:i,over:a}=n;if(!a)return;const d=i.id,c=a.id,l=e.map(m=>d===m.id?{...m,status:c}:m);return rt.update(l.find(m=>m.id===d)),l};return s.jsx(st,{container:!0,spacing:2,size:"grow",sx:{[tt.breakpoints.down("lg")]:{flexDirection:"column"}},children:s.jsx(Wt,{onDragEnd:o,children:Bt.map(n=>{var i,a;return s.jsx(st,{size:"grow",sx:{height:"100%",flexGrow:1},children:s.jsx(Ht,{label:n.label,tasksLength:((i=it(n.id,e))==null?void 0:i.length)||0,column:n,children:(a=it(n.id,e))==null?void 0:a.map(d=>s.jsx(ge,{data:d,draggable:!0},d.id))})},n.id)})})})}),De=({})=>{const{projectId:t}=kt(),e=_.getById(t);return!e||!t?s.jsx(Z,{children:"Error"}):s.jsxs(at,{spacing:1,sx:{height:"100%"},children:[s.jsx($t,{title:e.name,children:s.jsx(It,{to:"create-task",variant:"contained",children:"Add task"})}),s.jsx(me,{projectId:t}),s.jsx(he,{projectId:t})]})};export{De as default};
