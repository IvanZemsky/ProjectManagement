import{W as G,j as s,q as E,w as A,x as m,D as ue,r as c,F,V as De,I as k,J as W,as as Re,am as Te,K as j,k as de,a2 as Ce,U as Me,at as Ie,T as I,S as P,p as K,L as Pe,s as pe,R as fe,au as Ee,av as Ae,aw as Fe,Q as Z,ax as We,X as $e,u as ze,c as ee,e as te,f as Y,n as ge,ac as me,l as Be,d as Ne}from"./index-C-jB6FNB.js";import{C as Oe}from"./TaskColumn-Dh9yuy7A.js";import{t as J}from"./store-D9YZTOGP.js";import{t as Ue}from"./constants-CaX98ONQ.js";import{u as Ve,C as re,F as ae}from"./index.esm-hwsnyq1X.js";import{T as oe,I as se}from"./TextField-DlPsTCXm.js";import{S as ie}from"./Select-B_KLR2p3.js";import{M as U}from"./MenuItem-BmaKOZhk.js";const Le=G(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function qe(e){return A("MuiAvatar",e)}E("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const _e=e=>{const{classes:t,variant:r,colorDefault:o}=e;return W({root:["root",r,o&&"colorDefault"],img:["img"],fallback:["fallback"]},qe,t)},He=m("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(ue(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),Ye=m("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Xe=m(Le,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Ge({crossOrigin:e,referrerPolicy:t,src:r,srcSet:o}){const[a,i]=c.useState(!1);return c.useEffect(()=>{if(!r&&!o)return;i(!1);let n=!0;const l=new Image;return l.onload=()=>{n&&i("loaded")},l.onerror=()=>{n&&i("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=r,o&&(l.srcset=o),()=>{n=!1}},[e,t,r,o]),a}const Ke=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiAvatar"}),{alt:a,children:i,className:n,component:l="div",slots:u={},slotProps:p={},imgProps:h,sizes:R,src:v,srcSet:g,variant:T="circular",...x}=o;let d=null;const f=Ge({...h,src:v,srcSet:g}),y=v||g,C=y&&f!=="error",b={...o,colorDefault:!C,component:l,variant:T};delete b.ownerState;const S=_e(b),[$,z]=De("img",{className:S.img,elementType:Ye,externalForwardedProps:{slots:u,slotProps:{img:{...h,...p.img}}},additionalProps:{alt:a,src:v,srcSet:g,sizes:R},ownerState:b});return C?d=s.jsx($,{...z}):i||i===0?d=i:y&&a?d=a[0]:d=s.jsx(Xe,{ownerState:b,className:S.fallback}),s.jsx(He,{as:l,className:k(S.root,n),ref:r,...x,ownerState:b,children:d})});function Je(e){return A("MuiDialog",e)}const V=E("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),ve=c.createContext({}),Qe=m(Re,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Ze=e=>{const{classes:t,scroll:r,maxWidth:o,fullWidth:a,fullScreen:i}=e,n={root:["root"],container:["container",`scroll${j(r)}`],paper:["paper",`paperScroll${j(r)}`,`paperWidth${j(String(o))}`,a&&"paperFullWidth",i&&"paperFullScreen"]};return W(n,Je,t)},et=m(Te,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),tt=m("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${j(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),rt=m(de,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${j(r.scroll)}`],t[`paperWidth${j(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(ue(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${V.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),at=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialog"}),a=Ce(),i={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":n,"aria-labelledby":l,BackdropComponent:u,BackdropProps:p,children:h,className:R,disableEscapeKeyDown:v=!1,fullScreen:g=!1,fullWidth:T=!1,maxWidth:x="sm",onBackdropClick:d,onClick:f,onClose:y,open:C,PaperComponent:b=de,PaperProps:S={},scroll:$="paper",TransitionComponent:z=Ie,transitionDuration:Q=i,TransitionProps:ye,...Se}=o,M={...o,disableEscapeKeyDown:v,fullScreen:g,fullWidth:T,maxWidth:x,scroll:$},B=Ze(M),N=c.useRef(),we=w=>{N.current=w.target===w.currentTarget},ke=w=>{f&&f(w),N.current&&(N.current=null,d&&d(w),y&&y(w,"backdropClick"))},O=Me(l),je=c.useMemo(()=>({titleId:O}),[O]);return s.jsx(et,{className:k(B.root,R),closeAfterTransition:!0,components:{Backdrop:Qe},componentsProps:{backdrop:{transitionDuration:Q,as:u,...p}},disableEscapeKeyDown:v,onClose:y,open:C,ref:r,onClick:ke,ownerState:M,...Se,children:s.jsx(z,{appear:!0,in:C,timeout:Q,role:"presentation",...ye,children:s.jsx(tt,{className:k(B.container),onMouseDown:we,ownerState:M,children:s.jsx(rt,{as:b,elevation:24,role:"dialog","aria-describedby":n,"aria-labelledby":O,...S,className:k(B.paper,S.className),ownerState:M,children:s.jsx(ve.Provider,{value:je,children:h})})})})})});function ot(e){return A("MuiDialogActions",e)}E("MuiDialogActions",["root","spacing"]);const st=e=>{const{classes:t,disableSpacing:r}=e;return W({root:["root",!r&&"spacing"]},ot,t)},it=m("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),nt=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialogActions"}),{className:a,disableSpacing:i=!1,...n}=o,l={...o,disableSpacing:i},u=st(l);return s.jsx(it,{className:k(u.root,a),ownerState:l,ref:r,...n})});function lt(e){return A("MuiDialogTitle",e)}E("MuiDialogTitle",["root"]);const ct=e=>{const{classes:t}=e;return W({root:["root"]},lt,t)},ut=m(I,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),dt=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialogTitle"}),{className:a,id:i,...n}=o,l=o,u=ct(l),{titleId:p=i}=c.useContext(ve);return s.jsx(ut,{component:"h2",className:k(u.root,a),ownerState:l,ref:r,variant:"h6",id:i??p,...n})}),Ht=({team:e,onDelete:t,editBtn:r,link:o=!0})=>s.jsxs(P,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-start",gap:1},children:[r,e.map(a=>s.jsx(K,{title:a.position||"Unspecified position",arrow:!0,children:s.jsx(Oe,{component:o?Pe:"div",to:o?pe("",fe.Positions,a.id):void 0,avatar:s.jsx(Ke,{children:a.name[0]}),label:a.name,sx:{fontWeight:400,fontSize:18,cursor:"pointer"},onDelete:t?()=>t(a.id):void 0})},a.id))]});if(!c.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Ee)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function pt(e){e()}function ft(e){e||(e=pt),Ae({reactionScheduler:e})}function gt(e){return Fe(e)}var mt=1e4,vt=1e4,ht=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(o){o===void 0&&(o=mt),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var a=Date.now();r.registrations.forEach(function(i,n){a-i.registeredAt>=o&&(r.finalize(i.value),r.registrations.delete(n))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,o){this.registrations.set(o,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,vt))}}),e}(),bt=typeof FinalizationRegistry<"u"?FinalizationRegistry:ht,X=new bt(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),he={exports:{}},be={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=c;function xt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:xt,St=D.useState,wt=D.useEffect,kt=D.useLayoutEffect,jt=D.useDebugValue;function Dt(e,t){var r=t(),o=St({inst:{value:r,getSnapshot:t}}),a=o[0].inst,i=o[1];return kt(function(){a.value=r,a.getSnapshot=t,L(a)&&i({inst:a})},[e,r,t]),wt(function(){return L(a)&&i({inst:a}),e(function(){L(a)&&i({inst:a})})},[e]),jt(r),r}function L(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!yt(e,r)}catch{return!0}}function Rt(e,t){return t()}var Tt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rt:Dt;be.useSyncExternalStore=D.useSyncExternalStore!==void 0?D.useSyncExternalStore:Tt;he.exports=be;var Ct=he.exports;function ne(e){e.reaction=new We("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function Mt(e,t){t===void 0&&(t="observed");var r=Z.useRef(null);if(!r.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(l){return X.unregister(o),o.onStoreChange=l,o.reaction||(ne(o),o.stateVersion=Symbol()),function(){var u;o.onStoreChange=null,(u=o.reaction)===null||u===void 0||u.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};r.current=o}var a=r.current;a.reaction||(ne(a),X.register(r,a,a)),Z.useDebugValue(a.reaction,gt),Ct.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot);var i,n;if(a.reaction.track(function(){try{i=e()}catch(l){n=l}}),n)throw n;return i}var q,_,xe=typeof Symbol=="function"&&Symbol.for,It=(_=(q=Object.getOwnPropertyDescriptor(function(){},"name"))===null||q===void 0?void 0:q.configurable)!==null&&_!==void 0?_:!1,le=xe?Symbol.for("react.forward_ref"):typeof c.forwardRef=="function"&&c.forwardRef(function(e){return null}).$$typeof,ce=xe?Symbol.for("react.memo"):typeof c.memo=="function"&&c.memo(function(e){return null}).$$typeof;function Pt(e,t){var r;if(ce&&e.$$typeof===ce)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(r=void 0)!==null&&r!==void 0?r:!1,a=e,i=e.displayName||e.name;if(le&&e.$$typeof===le&&(o=!0,a=e.render,typeof a!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var n=function(l,u){return Mt(function(){return a(l,u)},i)};return n.displayName=e.displayName,It&&Object.defineProperty(n,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(n.contextTypes=e.contextTypes),o&&(n=c.forwardRef(n)),n=c.memo(n),At(e,n),n}var Et={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function At(e,t){Object.keys(e).forEach(function(r){Et[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var H;ft($e.unstable_batchedUpdates);H=X.finalizeAllImmediately;const Ft=({taskId:e,setEditedTask:t})=>{var x;const[r,o]=c.useState(!1),{projectId:a}=ze();if(!a)return s.jsx(I,{children:"Error"});const i=J.getById(e);if(!i)return s.jsx(I,{children:"Error"});const n=Ve({defaultValues:{name:i.name,description:i.description,assigneeId:((x=i.assignee)==null?void 0:x.id)||ee.Unspecified,status:i.status}}),{register:l,handleSubmit:u,getValues:p,control:h,formState:R,reset:v}=n,g=te.get(),T=()=>{const d={name:p("name").trim(),description:p("description").trim(),assigneeId:p("assigneeId"),status:p("status")},f={...i,...d,assignee:te.getById(d.assigneeId)};o(!0),t(f),v(d)};return s.jsx("form",{onSubmit:u(T),noValidate:!0,children:s.jsxs(P,{spacing:2,children:[s.jsx(oe,{id:"task-name",label:"Name",variant:"filled",autoFocus:!0,sx:{alignSelf:"flex-start",width:"100%"},size:"small",...l("name",{required:!0})}),s.jsx(oe,{id:"task-description",label:"Description",variant:"filled",sx:{alignSelf:"flex-start",width:"100%"},size:"small",multiline:!0,minRows:3,maxRows:3,...l("description")}),s.jsx(re,{control:h,name:"assigneeId",render:({field:d})=>s.jsxs(ae,{fullWidth:!0,children:[s.jsx(se,{id:"task-assignee-label",children:"Assignee"}),s.jsxs(ie,{id:"task-assignee",labelId:"task-assignee-label",label:"Assignee",...d,sx:{alignSelf:"flex-start",width:"100%"},children:[s.jsx(U,{value:ee.Unspecified,children:"Unspecified"}),g==null?void 0:g.data.map(f=>s.jsx(U,{value:f.id,children:f.name},f.id))]})]})}),s.jsx(re,{control:h,name:"status",render:({field:d})=>s.jsxs(ae,{fullWidth:!0,children:[s.jsx(se,{id:"task-status-label",children:"Status"}),s.jsx(ie,{id:"task-status",labelId:"task-status-label",label:"Status",...d,sx:{alignSelf:"flex-start",width:"100%"},children:Ue.map(f=>s.jsx(U,{value:f.id,children:f.label},f.id))})]})}),s.jsxs(P,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[s.jsx(Y,{variant:"contained",disabled:!R.isDirty,type:"submit",children:"Save"}),r&&s.jsx(I,{color:"success",children:"Changes saved."})]})]})})},Wt=G(s.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Yt=({id:e,name:t,onEditorClose:r,onPointerDown:o})=>{const[a,i]=c.useState(null),n=()=>{a&&J.update(a),r&&r()},{openModal:l,handleModalOpen:u,handleModalClose:p}=ge(!1,n);return s.jsxs(s.Fragment,{children:[s.jsx(K,{title:"Edit",children:s.jsx(me,{size:"small",onPointerDown:o,onClick:u,children:s.jsx(Wt,{})})}),s.jsx(Be,{title:`Edit task '${t}'`,open:l,onClose:p,children:s.jsx(Ft,{taskId:e,setEditedTask:i})})]})},$t=G(s.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),zt=Pt(({taskId:e,taskName:t,open:r,onClose:o,onDelete:a})=>{const i=()=>{J.delete(e),a&&a()};return s.jsx(at,{open:r,children:s.jsxs(P,{spacing:2,sx:{p:2},children:[s.jsxs(dt,{sx:{p:0,fontSize:20},children:["Are you sure you want to delete task '",t,"'?"]}),s.jsxs(nt,{sx:{p:0,mt:0},children:[s.jsx(Y,{color:"primary",variant:"contained",onClick:o,children:"Cancel"}),s.jsx(Y,{color:"sensitive",variant:"contained",onClick:i,children:"Delete"})]})]})})}),Xt=({id:e,projectId:t,name:r,onPointerDown:o,redirectOnDelete:a=!1})=>{const i=Ne(),n=a&&t?()=>i(pe("",fe.Projects,t)):null,{openModal:l,handleModalOpen:u,handleModalClose:p}=ge(!1);return s.jsxs(s.Fragment,{children:[s.jsx(K,{title:"Delete",children:s.jsx(me,{size:"small",onPointerDown:o,onClick:u,children:s.jsx($t,{})})}),s.jsx(zt,{taskId:e,taskName:r,open:l,onClose:p,onDelete:n})]})};export{Ke as A,Xt as D,Wt as E,Ht as T,Yt as a,Pt as o};
