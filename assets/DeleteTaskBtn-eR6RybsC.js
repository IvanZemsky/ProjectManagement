import{X as G,j as a,w as E,x as A,y as m,E as ue,r as c,G as F,W as De,J as k,K as W,ar as Re,al as Te,M as j,k as de,a0 as Ce,V as Me,as as Ie,T as I,S as P,q as K,L as Pe,s as pe,R as fe,at as Ee,au as Ae,av as Fe,U as Q,aw as We,Y as $e,u as ze,b as ee,e as te,f as H,n as ge,ab as me,l as Be,d as Ne}from"./index-CALslcgW.js";import{C as Oe}from"./TaskColumn-BEvx6-Lq.js";import{t as J}from"./store-Dl7FaPhY.js";import{t as Ue}from"./constants-CaX98ONQ.js";import{u as Ve,C as re,F as ae}from"./index.esm-D8IyPk3G.js";import{T as oe,I as se}from"./TextField-1CeUxQMA.js";import{S as ie}from"./Select-DlWwfj1p.js";import{M as U}from"./MenuItem-MNCwVu8Y.js";const Le=G(a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function qe(e){return A("MuiAvatar",e)}E("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ye=e=>{const{classes:t,variant:r,colorDefault:o}=e;return W({root:["root",r,o&&"colorDefault"],img:["img"],fallback:["fallback"]},qe,t)},_e=m("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(ue(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),He=m("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Xe=m(Le,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Ge({crossOrigin:e,referrerPolicy:t,src:r,srcSet:o}){const[s,n]=c.useState(!1);return c.useEffect(()=>{if(!r&&!o)return;n(!1);let i=!0;const l=new Image;return l.onload=()=>{i&&n("loaded")},l.onerror=()=>{i&&n("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=r,o&&(l.srcset=o),()=>{i=!1}},[e,t,r,o]),s}const Ke=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiAvatar"}),{alt:s,children:n,className:i,component:l="div",slots:u={},slotProps:p={},imgProps:h,sizes:R,src:v,srcSet:g,variant:T="circular",...x}=o;let d=null;const f=Ge({...h,src:v,srcSet:g}),y=v||g,C=y&&f!=="error",b={...o,colorDefault:!C,component:l,variant:T};delete b.ownerState;const S=Ye(b),[$,z]=De("img",{className:S.img,elementType:He,externalForwardedProps:{slots:u,slotProps:{img:{...h,...p.img}}},additionalProps:{alt:s,src:v,srcSet:g,sizes:R},ownerState:b});return C?d=a.jsx($,{...z}):n||n===0?d=n:y&&s?d=s[0]:d=a.jsx(Xe,{ownerState:b,className:S.fallback}),a.jsx(_e,{as:l,className:k(S.root,i),ref:r,...x,ownerState:b,children:d})});function Je(e){return A("MuiDialog",e)}const V=E("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),ve=c.createContext({}),Ze=m(Re,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Qe=e=>{const{classes:t,scroll:r,maxWidth:o,fullWidth:s,fullScreen:n}=e,i={root:["root"],container:["container",`scroll${j(r)}`],paper:["paper",`paperScroll${j(r)}`,`paperWidth${j(String(o))}`,s&&"paperFullWidth",n&&"paperFullScreen"]};return W(i,Je,t)},et=m(Te,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),tt=m("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${j(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),rt=m(de,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${j(r.scroll)}`],t[`paperWidth${j(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(ue(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${V.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),at=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialog"}),s=Ce(),n={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,BackdropComponent:u,BackdropProps:p,children:h,className:R,disableEscapeKeyDown:v=!1,fullScreen:g=!1,fullWidth:T=!1,maxWidth:x="sm",onBackdropClick:d,onClick:f,onClose:y,open:C,PaperComponent:b=de,PaperProps:S={},scroll:$="paper",TransitionComponent:z=Ie,transitionDuration:Z=n,TransitionProps:ye,...Se}=o,M={...o,disableEscapeKeyDown:v,fullScreen:g,fullWidth:T,maxWidth:x,scroll:$},B=Qe(M),N=c.useRef(),we=w=>{N.current=w.target===w.currentTarget},ke=w=>{f&&f(w),N.current&&(N.current=null,d&&d(w),y&&y(w,"backdropClick"))},O=Me(l),je=c.useMemo(()=>({titleId:O}),[O]);return a.jsx(et,{className:k(B.root,R),closeAfterTransition:!0,components:{Backdrop:Ze},componentsProps:{backdrop:{transitionDuration:Z,as:u,...p}},disableEscapeKeyDown:v,onClose:y,open:C,ref:r,onClick:ke,ownerState:M,...Se,children:a.jsx(z,{appear:!0,in:C,timeout:Z,role:"presentation",...ye,children:a.jsx(tt,{className:k(B.container),onMouseDown:we,ownerState:M,children:a.jsx(rt,{as:b,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":O,...S,className:k(B.paper,S.className),ownerState:M,children:a.jsx(ve.Provider,{value:je,children:h})})})})})});function ot(e){return A("MuiDialogActions",e)}E("MuiDialogActions",["root","spacing"]);const st=e=>{const{classes:t,disableSpacing:r}=e;return W({root:["root",!r&&"spacing"]},ot,t)},it=m("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),nt=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialogActions"}),{className:s,disableSpacing:n=!1,...i}=o,l={...o,disableSpacing:n},u=st(l);return a.jsx(it,{className:k(u.root,s),ownerState:l,ref:r,...i})});function lt(e){return A("MuiDialogTitle",e)}E("MuiDialogTitle",["root"]);const ct=e=>{const{classes:t}=e;return W({root:["root"]},lt,t)},ut=m(I,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),dt=c.forwardRef(function(t,r){const o=F({props:t,name:"MuiDialogTitle"}),{className:s,id:n,...i}=o,l=o,u=ct(l),{titleId:p=n}=c.useContext(ve);return a.jsx(ut,{component:"h2",className:k(u.root,s),ownerState:l,ref:r,variant:"h6",id:n??p,...i})}),_t=({team:e,excludeId:t,onDelete:r,editBtn:o,links:s=!0})=>{const n=e.filter(i=>i.id!==t);return a.jsxs(P,{direction:"row",sx:{flexWrap:"wrap",alignItems:"flex-start",gap:1},children:[o,n.map(i=>{var l;return a.jsx(K,{title:((l=i.position)==null?void 0:l.name)||"Unspecified position",arrow:!0,children:a.jsx(Oe,{component:s?Pe:"div",to:s?pe("",fe.Executors,i.id):void 0,avatar:a.jsx(Ke,{children:i.name[0]}),label:i.name,sx:{fontWeight:400,fontSize:18,cursor:"pointer"},onDelete:r?()=>r(i.id):void 0})},i.id)})]})};if(!c.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Ee)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function pt(e){e()}function ft(e){e||(e=pt),Ae({reactionScheduler:e})}function gt(e){return Fe(e)}var mt=1e4,vt=1e4,ht=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(o){o===void 0&&(o=mt),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var s=Date.now();r.registrations.forEach(function(n,i){s-n.registeredAt>=o&&(r.finalize(n.value),r.registrations.delete(i))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,o){this.registrations.set(o,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,vt))}}),e}(),bt=typeof FinalizationRegistry<"u"?FinalizationRegistry:ht,X=new bt(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),he={exports:{}},be={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=c;function xt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:xt,St=D.useState,wt=D.useEffect,kt=D.useLayoutEffect,jt=D.useDebugValue;function Dt(e,t){var r=t(),o=St({inst:{value:r,getSnapshot:t}}),s=o[0].inst,n=o[1];return kt(function(){s.value=r,s.getSnapshot=t,L(s)&&n({inst:s})},[e,r,t]),wt(function(){return L(s)&&n({inst:s}),e(function(){L(s)&&n({inst:s})})},[e]),jt(r),r}function L(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!yt(e,r)}catch{return!0}}function Rt(e,t){return t()}var Tt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rt:Dt;be.useSyncExternalStore=D.useSyncExternalStore!==void 0?D.useSyncExternalStore:Tt;he.exports=be;var Ct=he.exports;function ne(e){e.reaction=new We("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function Mt(e,t){t===void 0&&(t="observed");var r=Q.useRef(null);if(!r.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(l){return X.unregister(o),o.onStoreChange=l,o.reaction||(ne(o),o.stateVersion=Symbol()),function(){var u;o.onStoreChange=null,(u=o.reaction)===null||u===void 0||u.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};r.current=o}var s=r.current;s.reaction||(ne(s),X.register(r,s,s)),Q.useDebugValue(s.reaction,gt),Ct.useSyncExternalStore(s.subscribe,s.getSnapshot,s.getSnapshot);var n,i;if(s.reaction.track(function(){try{n=e()}catch(l){i=l}}),i)throw i;return n}var q,Y,xe=typeof Symbol=="function"&&Symbol.for,It=(Y=(q=Object.getOwnPropertyDescriptor(function(){},"name"))===null||q===void 0?void 0:q.configurable)!==null&&Y!==void 0?Y:!1,le=xe?Symbol.for("react.forward_ref"):typeof c.forwardRef=="function"&&c.forwardRef(function(e){return null}).$$typeof,ce=xe?Symbol.for("react.memo"):typeof c.memo=="function"&&c.memo(function(e){return null}).$$typeof;function Pt(e,t){var r;if(ce&&e.$$typeof===ce)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(r=void 0)!==null&&r!==void 0?r:!1,s=e,n=e.displayName||e.name;if(le&&e.$$typeof===le&&(o=!0,s=e.render,typeof s!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var i=function(l,u){return Mt(function(){return s(l,u)},n)};return i.displayName=e.displayName,It&&Object.defineProperty(i,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(i.contextTypes=e.contextTypes),o&&(i=c.forwardRef(i)),i=c.memo(i),At(e,i),i}var Et={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function At(e,t){Object.keys(e).forEach(function(r){Et[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var _;ft($e.unstable_batchedUpdates);_=X.finalizeAllImmediately;const Ft=({taskId:e,setEditedTask:t})=>{var x;const[r,o]=c.useState(!1),{projectId:s}=ze();if(!s)return a.jsx(I,{children:"Error"});const n=J.getById(e);if(!n)return a.jsx(I,{children:"Error"});const i=Ve({defaultValues:{name:n.name,description:n.description,assigneeId:((x=n.assignee)==null?void 0:x.id)||ee.Unspecified,status:n.status}}),{register:l,handleSubmit:u,getValues:p,control:h,formState:R,reset:v}=i,g=te.get(),T=()=>{const d={name:p("name").trim(),description:p("description").trim(),assigneeId:p("assigneeId"),status:p("status")},f={...n,name:d.name,description:d.description,status:d.status,assignee:te.getById(d.assigneeId)};o(!0),t(f),v(d)};return a.jsx("form",{onSubmit:u(T),noValidate:!0,children:a.jsxs(P,{spacing:2,children:[a.jsx(oe,{id:"task-name",label:"Name",variant:"filled",autoFocus:!0,sx:{alignSelf:"flex-start",width:"100%"},size:"small",...l("name",{required:!0})}),a.jsx(oe,{id:"task-description",label:"Description",variant:"filled",sx:{alignSelf:"flex-start",width:"100%"},size:"small",multiline:!0,minRows:3,maxRows:3,...l("description")}),a.jsx(re,{control:h,name:"assigneeId",render:({field:d})=>a.jsxs(ae,{fullWidth:!0,children:[a.jsx(se,{id:"task-assignee-label",children:"Assignee"}),a.jsxs(ie,{id:"task-assignee",labelId:"task-assignee-label",label:"Assignee",...d,sx:{alignSelf:"flex-start",width:"100%"},children:[a.jsx(U,{value:ee.Unspecified,children:"Unspecified"}),g==null?void 0:g.data.map(f=>a.jsx(U,{value:f.id,children:f.name},f.id))]})]})}),a.jsx(re,{control:h,name:"status",render:({field:d})=>a.jsxs(ae,{fullWidth:!0,children:[a.jsx(se,{id:"task-status-label",children:"Status"}),a.jsx(ie,{id:"task-status",labelId:"task-status-label",label:"Status",...d,sx:{alignSelf:"flex-start",width:"100%"},children:Ue.map(f=>a.jsx(U,{value:f.id,children:f.label},f.id))})]})}),a.jsxs(P,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[a.jsx(H,{variant:"contained",disabled:!R.isDirty,type:"submit",children:"Save"}),r&&a.jsx(I,{color:"success",children:"Changes saved."})]})]})})},Wt=G(a.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Ht=({id:e,name:t,onEditorClose:r,onPointerDown:o})=>{const[s,n]=c.useState(null),i=()=>{s&&J.update(s),r&&r()},{openModal:l,handleModalOpen:u,handleModalClose:p}=ge(!1,i);return a.jsxs(a.Fragment,{children:[a.jsx(K,{title:"Edit",children:a.jsx(me,{size:"small",onPointerDown:o,onClick:u,children:a.jsx(Wt,{})})}),a.jsx(Be,{title:`Edit task '${t}'`,open:l,onClose:p,children:a.jsx(Ft,{taskId:e,setEditedTask:n})})]})},$t=G(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),zt=Pt(({taskId:e,taskName:t,open:r,onClose:o,onDelete:s})=>{const n=()=>{J.delete(e),s&&s()};return a.jsx(at,{open:r,children:a.jsxs(P,{spacing:2,sx:{p:2},children:[a.jsxs(dt,{sx:{p:0,fontSize:20},children:["Are you sure you want to delete task '",t,"'?"]}),a.jsxs(nt,{sx:{p:0,mt:0},children:[a.jsx(H,{color:"primary",variant:"contained",onClick:o,children:"Cancel"}),a.jsx(H,{color:"sensitive",variant:"contained",onClick:n,children:"Delete"})]})]})})}),Xt=({id:e,projectId:t,name:r,onPointerDown:o,redirectOnDelete:s=!1})=>{const n=Ne(),i=s&&t?()=>n(pe("",fe.Projects,t)):null,{openModal:l,handleModalOpen:u,handleModalClose:p}=ge(!1);return a.jsxs(a.Fragment,{children:[a.jsx(K,{title:"Delete",children:a.jsx(me,{size:"small",onPointerDown:o,onClick:u,children:a.jsx($t,{})})}),a.jsx(zt,{taskId:e,taskName:r,open:l,onClose:p,onDelete:i})]})};export{Ke as A,Xt as D,Wt as E,_t as T,Ht as a,Pt as o};
