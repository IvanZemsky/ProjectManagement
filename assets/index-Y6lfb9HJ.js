import{w as F,x as q,y as S,E as T,r as x,G as O,a0 as ht,a1 as bt,I as yt,j as o,J as H,K as J,a2 as vt,a3 as Ct,a4 as st,k as wt,a5 as jt,W as nt,z as St,S as tt,T as L,q as Rt,L as At,s as Et,R as Tt,X as Dt,t as et,a6 as Pt,a7 as rt,u as kt,i as It,B as zt}from"./index-CALslcgW.js";import{p as Z}from"./store-By_SzlHW.js";import{A as $t,o as dt,T as Mt,a as Bt,D as Nt}from"./DeleteTaskBtn-eR6RybsC.js";import{C as Wt,u as Gt,T as Ht,D as Lt,a as Ut}from"./TaskColumn-BEvx6-Lq.js";import{t as it}from"./store-Dl7FaPhY.js";import{t as Vt}from"./constants-CaX98ONQ.js";import"./index.esm-D8IyPk3G.js";import"./utils-Bt3GB74b.js";import"./TextField-1CeUxQMA.js";import"./Select-DlWwfj1p.js";import"./MenuItem-MNCwVu8Y.js";function Ft(t){return q("MuiCollapse",t)}F("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const qt=t=>{const{orientation:e,classes:s}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return J(r,Ft,s)},Ot=S("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.orientation],s.state==="entered"&&e.entered,s.state==="exited"&&!s.in&&s.collapsedSize==="0px"&&e.hidden]}})(T(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Jt=S("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Kt=S("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),_=x.forwardRef(function(e,s){const r=O({props:e,name:"MuiCollapse"}),{addEndListener:i,children:a,className:d,collapsedSize:c="0px",component:p,easing:l,in:m,onEnter:f,onEntered:y,onEntering:v,onExit:D,onExited:R,onExiting:C,orientation:u="vertical",style:P,timeout:h=vt.standard,TransitionComponent:W=Ct,...K}=r,k={...r,orientation:u,collapsedSize:c},b=qt(k),I=ht(),Q=bt(),w=x.useRef(null),z=x.useRef(),$=typeof c=="number"?`${c}px`:c,A=u==="horizontal",E=A?"width":"height",M=x.useRef(null),X=yt(s,M),B=n=>g=>{if(n){const j=M.current;g===void 0?n(j):n(j,g)}},Y=()=>w.current?w.current[A?"clientWidth":"clientHeight"]:0,lt=B((n,g)=>{w.current&&A&&(w.current.style.position="absolute"),n.style[E]=$,f&&f(n,g)}),pt=B((n,g)=>{const j=Y();w.current&&A&&(w.current.style.position="");const{duration:G,easing:U}=st({style:P,timeout:h,easing:l},{mode:"enter"});if(h==="auto"){const ot=I.transitions.getAutoHeightDuration(j);n.style.transitionDuration=`${ot}ms`,z.current=ot}else n.style.transitionDuration=typeof G=="string"?G:`${G}ms`;n.style[E]=`${j}px`,n.style.transitionTimingFunction=U,v&&v(n,g)}),ut=B((n,g)=>{n.style[E]="auto",y&&y(n,g)}),xt=B(n=>{n.style[E]=`${Y()}px`,D&&D(n)}),gt=B(R),mt=B(n=>{const g=Y(),{duration:j,easing:G}=st({style:P,timeout:h,easing:l},{mode:"exit"});if(h==="auto"){const U=I.transitions.getAutoHeightDuration(g);n.style.transitionDuration=`${U}ms`,z.current=U}else n.style.transitionDuration=typeof j=="string"?j:`${j}ms`;n.style[E]=$,n.style.transitionTimingFunction=G,C&&C(n)}),ft=n=>{h==="auto"&&Q.start(z.current||0,n),i&&i(M.current,n)};return o.jsx(W,{in:m,onEnter:lt,onEntered:ut,onEntering:pt,onExit:xt,onExited:gt,onExiting:mt,addEndListener:ft,nodeRef:M,timeout:h==="auto"?null:h,...K,children:(n,g)=>o.jsx(Ot,{as:p,className:H(b.root,d,{entered:b.entered,exited:!m&&$==="0px"&&b.hidden}[n]),style:{[A?"minWidth":"minHeight"]:$,...P},ref:X,...g,ownerState:{...k,state:n},children:o.jsx(Jt,{ownerState:{...k,state:n},className:b.wrapper,ref:w,children:o.jsx(Kt,{ownerState:{...k,state:n},className:b.wrapperInner,children:a})})})})});_&&(_.muiSupportAuto=!0);const ct=x.createContext({});function Qt(t){return q("MuiAccordion",t)}const V=F("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Xt=t=>{const{classes:e,square:s,expanded:r,disabled:i,disableGutters:a}=t;return J({root:["root",!s&&"rounded",r&&"expanded",i&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},Qt,e)},Yt=S(wt,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[{[`& .${V.region}`]:e.region},e.root,!s.square&&e.rounded,!s.disableGutters&&e.gutters]}})(T(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${V.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${V.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),T(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${V.expanded}`]:{margin:"16px 0"}}}]}))),Zt=S("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(t,e)=>e.heading})({all:"unset"}),_t=x.forwardRef(function(e,s){const r=O({props:e,name:"MuiAccordion"}),{children:i,className:a,defaultExpanded:d=!1,disabled:c=!1,disableGutters:p=!1,expanded:l,onChange:m,square:f=!1,slots:y={},slotProps:v={},TransitionComponent:D,TransitionProps:R,...C}=r,[u,P]=jt({controlled:l,default:d,name:"Accordion",state:"expanded"}),h=x.useCallback(X=>{P(!u),m&&m(X,!u)},[u,m,P]),[W,...K]=x.Children.toArray(i),k=x.useMemo(()=>({expanded:u,disabled:c,disableGutters:p,toggle:h}),[u,c,p,h]),b={...r,square:f,disabled:c,disableGutters:p,expanded:u},I=Xt(b),Q={transition:D,...y},w={transition:R,...v},z={slots:Q,slotProps:w},[$,A]=nt("heading",{elementType:Zt,externalForwardedProps:z,className:I.heading,ownerState:b}),[E,M]=nt("transition",{elementType:_,externalForwardedProps:z,ownerState:b});return o.jsxs(Yt,{className:H(I.root,a),ref:s,ownerState:b,square:f,...C,children:[o.jsx($,{...A,children:o.jsx(ct.Provider,{value:k,children:W})}),o.jsx(E,{in:u,timeout:"auto",...M,children:o.jsx("div",{"aria-labelledby":W.props.id,id:W.props["aria-controls"],role:"region",className:I.region,children:K})})]})});function te(t){return q("MuiAccordionDetails",t)}F("MuiAccordionDetails",["root"]);const ee=t=>{const{classes:e}=t;return J({root:["root"]},te,e)},oe=S("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(T(({theme:t})=>({padding:t.spacing(1,2,2)}))),se=x.forwardRef(function(e,s){const r=O({props:e,name:"MuiAccordionDetails"}),{className:i,...a}=r,d=r,c=ee(d);return o.jsx(oe,{className:H(c.root,i),ref:s,ownerState:d,...a})});function ne(t){return q("MuiAccordionSummary",t)}const N=F("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),re=t=>{const{classes:e,expanded:s,disabled:r,disableGutters:i}=t;return J({root:["root",s&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",s&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",s&&"expanded"]},ne,e)},ie=S(St,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(T(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${N.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${N.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${N.disabled})`]:{cursor:"pointer"},variants:[{props:s=>!s.disableGutters,style:{[`&.${N.expanded}`]:{minHeight:64}}}]}})),ae=S("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(T(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${N.expanded}`]:{margin:"20px 0"}}}]}))),de=S("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(T(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${N.expanded}`]:{transform:"rotate(180deg)"}}))),ce=x.forwardRef(function(e,s){const r=O({props:e,name:"MuiAccordionSummary"}),{children:i,className:a,expandIcon:d,focusVisibleClassName:c,onClick:p,...l}=r,{disabled:m=!1,disableGutters:f,expanded:y,toggle:v}=x.useContext(ct),D=u=>{v&&v(u),p&&p(u)},R={...r,expanded:y,disabled:m,disableGutters:f},C=re(R);return o.jsxs(ie,{focusRipple:!1,disableRipple:!0,disabled:m,component:"div","aria-expanded":y,className:H(C.root,a),focusVisibleClassName:H(C.focusVisible,c),onClick:D,ref:s,ownerState:R,...l,children:[o.jsx(ae,{className:C.content,ownerState:R,children:i}),d&&o.jsx(de,{className:C.expandIconWrapper,ownerState:R,children:d})]})}),le=({assignee:t})=>{var e;return o.jsx(tt,{spacing:2,direction:"row",sx:{flexWrap:"wrap",alignItems:"center"},children:t?o.jsxs(o.Fragment,{children:[o.jsx(L,{children:"Assignee: "}),o.jsx(Rt,{title:((e=t.position)==null?void 0:e.name)||"Unspecified position",arrow:!0,children:o.jsx(Wt,{component:At,to:Et("",Tt.Executors,t.id),avatar:o.jsx($t,{children:t.name[0]}),label:t.name,sx:{fontWeight:400,fontSize:18,cursor:"pointer"}})})]}):o.jsx(L,{children:"Assignee: unspecified"})})},pe=Dt(o.jsx("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown"),ue=dt(({projectId:t})=>{var r;const e=Z.getById(t),s=Z.getTeam(t);return e?o.jsxs(_t,{disableGutters:!0,disabled:!e.description&&!(s!=null&&s.length),sx:{border:"1px solid",borderColor:et.palette.white.dark},children:[o.jsx(ce,{expandIcon:o.jsx(pe,{}),sx:{fontSize:18},children:"Project information"}),o.jsx(se,{children:o.jsxs(tt,{spacing:2,sx:{alignItems:"flex-start"},children:[o.jsx(L,{children:e.description||"No description provided"}),o.jsx(le,{assignee:e==null?void 0:e.lead}),s!=null&&s.length?o.jsx(Mt,{team:s,excludeId:(r=e.lead)==null?void 0:r.id}):"Project team is empty"]})})]}):o.jsx(L,{children:"Error"})}),at=(t,e)=>{if(e)return e.filter(s=>s.status===t)},xe=t=>{if(t)return{transform:`translate(${t.x}px, ${t.y}px)`,zIndex:20,cursor:"grabbing"}},ge=({data:t,draggable:e})=>{const s=Pt(et.breakpoints.up("lg"))&&e,[r,i]=x.useState(s),{id:a}=t,{attributes:d,listeners:c,setNodeRef:p,transform:l}=Gt({id:a,disabled:!r}),m=xe(l),f=v=>{v.stopPropagation(),i(!1)},y=()=>i(!0);return o.jsx(Ht,{data:t,ref:p,...c,...d,sx:{cursor:r?"grab":"default",...m},editBtn:o.jsx(Bt,{id:t.id,name:t.name,onPointerDown:f,onEditorClose:y}),deleteBtn:o.jsx(Nt,{id:t.id,name:t.name,onPointerDown:f})})},me=dt(({projectId:t})=>{const e=it.getByProjectId(t),s=r=>{const{active:i,over:a}=r;if(!a)return;const d=i.id,c=a.id,p=e.map(l=>d===l.id?{...l,status:c}:l);return it.update(p.find(l=>l.id===d)),p};return o.jsx(rt,{container:!0,spacing:2,size:"grow",sx:{[et.breakpoints.down("lg")]:{flexDirection:"column"}},children:o.jsx(Lt,{onDragEnd:s,children:Vt.map(r=>{var i,a;return o.jsx(rt,{size:"grow",sx:{height:"100%",flexGrow:1},children:o.jsx(Ut,{label:r.label,tasksLength:((i=at(r.id,e))==null?void 0:i.length)||0,column:r,children:(a=at(r.id,e))==null?void 0:a.map(d=>o.jsx(ge,{data:d,draggable:!0},d.id))})},r.id)})})})}),Ee=({})=>{const{projectId:t}=kt(),e=Z.getById(t);return!e||!t?o.jsx(L,{children:"Error"}):o.jsxs(tt,{spacing:1,sx:{height:"100%"},children:[o.jsx(It,{title:e.name,children:o.jsx(zt,{to:"create-task",variant:"contained",children:"Add task"})}),o.jsx(ue,{projectId:t}),o.jsx(me,{projectId:t})]})};export{Ee as default};
