import{b as d,d as w,r as I,e as E,j as e,S as x,f as P,s as T,R as q,T as y}from"./index-CALslcgW.js";import{p as W}from"./store-By_SzlHW.js";import{u as F,F as L}from"./index.esm-D8IyPk3G.js";import{T as l,I as R}from"./TextField-1CeUxQMA.js";import{S as V}from"./Select-DlWwfj1p.js";import{M as u}from"./MenuItem-MNCwVu8Y.js";import"./store-Dl7FaPhY.js";import"./utils-Bt3GB74b.js";const z=()=>{var n,o,c;const f=F({defaultValues:{name:"",description:"",leadId:d.Unspecified,endDate:"",startDate:""}}),h=w(),{register:r,handleSubmit:j,getValues:s,setError:g,clearErrors:S,formState:b}=f,{errors:t}=b,i=I.useMemo(()=>E.get(),[]),D=()=>{const a=s("startDate"),m=s("endDate");if(new Date(a)>new Date(m)){g("endDate",{type:"validate",message:"End date cannot be earlier than start date."});return}S("endDate");const v={name:s("name"),description:s("description"),leadId:s("leadId"),startDate:a,endDate:m},p=W.create(v);p&&h("/"+T(q.Projects,p.id))};return e.jsx("form",{onSubmit:j(D),noValidate:!0,children:e.jsxs(x,{spacing:2,children:[e.jsx(l,{id:"project-name",label:"Name",variant:"filled",sx:{alignSelf:"flex-start",maxWidth:400,width:"100%"},size:"small",error:!!t.name,helperText:(n=t.name)==null?void 0:n.message,...r("name",{required:"Name is required."})}),e.jsx(l,{id:"project-description",label:"Description",variant:"filled",sx:{alignSelf:"flex-start",maxWidth:400,width:"100%"},size:"small",multiline:!0,minRows:3,maxRows:3,...r("description")}),e.jsxs(L,{fullWidth:!0,children:[e.jsx(R,{id:"project-lead-label",children:"Lead"}),e.jsxs(V,{id:"project-lead",labelId:"project-lead-label",label:"Lead",defaultValue:d.Unspecified,sx:{alignSelf:"flex-start",maxWidth:400,width:"100%"},...r("leadId"),children:[e.jsx(u,{value:d.Unspecified,selected:!0,children:"Unspecified"}),!!(i!=null&&i.data.length)&&i.data.map(a=>e.jsx(u,{value:a.id,children:a.name},a.id))]})]}),e.jsx(l,{id:"project-start-date",label:"Start date",slotProps:{inputLabel:{shrink:!0}},variant:"filled",sx:{alignSelf:"flex-start",maxWidth:400,width:"100%"},size:"small",type:"date",error:!!t.startDate,helperText:(o=t.startDate)==null?void 0:o.message,...r("startDate",{required:"Start date is required."})}),e.jsx(l,{id:"project-end-date",label:"End date",slotProps:{inputLabel:{shrink:!0}},variant:"filled",sx:{alignSelf:"flex-start",maxWidth:400,width:"100%"},size:"small",type:"date",error:!!t.endDate,helperText:(c=t.endDate)==null?void 0:c.message,...r("endDate",{required:"End date is required."})}),e.jsx(P,{variant:"contained",type:"submit",sx:{alignSelf:"flex-start"},children:"Create"})]})})},H=()=>e.jsxs(x,{spacing:2,children:[e.jsx(y,{variant:"h1",children:"New project"}),e.jsx(z,{})]});export{H as default};
