import{j as e,S as d,t as c,T as g,r as f,G as l,d as b,P as m,B as w}from"./index-CI9R057X.js";import{p as T}from"./storage-BeeVq0et.js";import{u as v,T as D,D as I,t as h}from"./TaskCard-BsW9fwOm.js";const k=[{id:"to do",label:"To do"},{id:"in progress",label:"In progress"},{id:"code review",label:"Code review"},{id:"done",label:"Done"}],y=({column:t,variant:r="h3",label:n,tasks:s})=>{const{setNodeRef:o}=v({id:t.id});return e.jsxs(d,{spacing:1,sx:{height:"100%",bgcolor:c.palette.white.dark,borderRadius:1},children:[e.jsxs(d,{direction:"row",sx:{position:"sticky",top:23,bgcolor:"inherit",left:0,p:2,pb:"3px",borderRadius:"4px 4px 0 0",alignItems:"flex-end",justifyContent:"space-between",zIndex:2},children:[e.jsx(g,{variant:r,children:n}),e.jsx(g,{children:(s==null?void 0:s.length)||0})]}),e.jsx(d,{ref:o,direction:{lg:"column",xs:"row"},spacing:2,sx:{overflow:"visible",p:2,pt:0,flexGrow:1,[c.breakpoints.down("lg")]:{overflowX:"scroll"}},children:s==null?void 0:s.map(i=>e.jsx(D,{...i},i.id))})]})},S=(t,r)=>{if(r)return r.filter(n=>n.status===t)},C=t=>h.getByProjectId(t)||[],P=({projectId:t})=>{const[r,n]=f.useState(()=>C(t)),s=o=>{const{active:i,over:p}=o;if(!p)return;const x=i.id,u=p.id;n(()=>{const j=r.map(a=>x===a.id?{...a,status:u}:a);return h.updateOne(x,u),j})};return e.jsx(l,{container:!0,spacing:2,size:"grow",sx:{[c.breakpoints.down("lg")]:{flexDirection:"column"}},children:e.jsx(I,{onDragEnd:s,children:k.map(o=>e.jsx(l,{size:"grow",sx:{height:"100%",flexGrow:1},children:e.jsx(y,{label:o.label,tasks:S(o.id,r),column:o})},o.id))})})},R=({})=>{const{id:t}=b(),r=T.getById(t);return r?e.jsxs(l,{container:!0,direction:"column",sx:{height:"100%"},children:[e.jsx(m,{title:r.name,children:e.jsx(w,{to:"create-task",variant:"contained",children:"Add task"})}),e.jsx(P,{projectId:t})]}):e.jsx("p",{children:"Error"})};export{R as default};
