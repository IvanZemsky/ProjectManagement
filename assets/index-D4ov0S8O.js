import{j as e,S as c,d as u,g as j,i as m,l as f,Q as b,r as C,T as d,k as w,e as S,U as E,t as D,P as M,V as B,B as k,R as I}from"./index-lYFP5Mbq.js";import{u as R,T as F,a as z,b as O,c as P,d as l,e as V,f as A}from"./useTablePagination-LRpgQlxP.js";import{o as T,D as H,a as N,b as Y,c as q,E as G}from"./Delete-B1e0ZgLZ.js";import{u as L}from"./index.esm-BDWSUy-D.js";import{T as Q}from"./TextField-By6Opk9u.js";import"./Select-iZkkjfx3.js";import"./utils-Bxiod-Hf.js";import"./MenuItem-BaMFnwzx.js";const U=T(({positionId:s,positionName:n,open:t,onClose:o,onDelete:i})=>{const r=()=>{j.delete(s),i&&i()};return e.jsx(H,{open:t,children:e.jsxs(c,{spacing:2,sx:{p:2},children:[e.jsxs(N,{sx:{p:0,fontSize:20},children:["Are you sure you want to delete positon '",n,"'?"]}),e.jsxs(Y,{sx:{p:0,mt:0},children:[e.jsx(u,{color:"primary",variant:"contained",onClick:o,children:"Cancel"}),e.jsx(u,{color:"sensitive",variant:"contained",onClick:r,children:"Delete"})]})]})})}),$=({id:s,name:n})=>{const{openModal:t,handleModalOpen:o,handleModalClose:i}=m(!1);return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Delete",children:e.jsx(b,{size:"small",onClick:o,children:e.jsx(q,{})})}),e.jsx(U,{positionId:s,positionName:n,open:t,onClose:i})]})},J=({positionId:s,setEditedPosition:n})=>{const[t,o]=C.useState(!1);if(!s)return e.jsx(d,{children:"Error"});const i=j.getById(s);if(!i)return e.jsx(d,{children:"Error"});const r=L({defaultValues:{name:i.name}}),{register:x,handleSubmit:a,formState:h,reset:p,getValues:v}=r,y=()=>{const g={...i,name:v("name")};o(!0),n(g),p(g)};return e.jsx("form",{onSubmit:a(y),noValidate:!0,children:e.jsxs(c,{spacing:2,children:[e.jsx(Q,{id:"position-name",label:"Name",variant:"filled",autoFocus:!0,sx:{alignSelf:"flex-start",width:"100%"},size:"small",...x("name",{required:!0})}),e.jsxs(c,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[e.jsx(u,{variant:"contained",disabled:!h.isDirty,type:"submit",children:"Save"}),t&&e.jsx(d,{color:"success",children:"Changes saved."})]})]})})},K=({id:s,name:n,onEditorClose:t,onPointerDown:o})=>{const[i,r]=C.useState(null),x=()=>{i&&j.update(i),t&&t()},{openModal:a,handleModalOpen:h,handleModalClose:p}=m(!1,x);return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Edit",children:e.jsx(b,{size:"small",onPointerDown:o,onClick:h,children:e.jsx(G,{})})}),e.jsx(w,{title:`Edit position '${n}'`,open:a,onClose:p,children:e.jsx(J,{positionId:s,setEditedPosition:r})})]})},W=(s,n)=>s?s.filter(t=>{var o;return((o=t.position)==null?void 0:o.id)===n}).length:0,X=T(({})=>{const s=j.get(),n=S.get();if(!s||!s.length)return e.jsx(d,{children:"You haven't added any positions yet"});const{page:t,rowsPerPage:o,visibleRows:i,handleChangePage:r,handleChangeRowsPerPage:x}=R(s,12);return e.jsxs(c,{component:E,elevation:3,sx:{flexGrow:1,justifyContent:"space-between",overflow:"hidden"},children:[e.jsx(F,{children:e.jsxs(z,{children:[e.jsx(O,{sx:{bgcolor:D.palette.white.dark},children:e.jsxs(P,{children:[e.jsx(l,{sx:{py:1},children:"Position"}),e.jsx(l,{sx:{py:1},align:"right",children:"Executors"}),e.jsx(l,{sx:{width:"10px",p:.5}}),e.jsx(l,{sx:{width:"10px",p:.5}})]})}),e.jsx(V,{children:i.map((a,h)=>e.jsxs(P,{hover:!0,children:[e.jsx(l,{children:a.name}),e.jsx(l,{align:"right",children:W(n==null?void 0:n.data,a.id)}),e.jsx(l,{sx:{width:"10px",p:.5},children:e.jsx(K,{id:a.id,name:a.name})}),e.jsx(l,{sx:{width:"10px",p:.5},children:e.jsx($,{id:a.id,name:a.name})})]},a.name+h))})]})}),e.jsx(A,{rowsPerPageOptions:[12,25],component:"div",count:s.length,rowsPerPage:o,page:t,onPageChange:r,onRowsPerPageChange:x})]})}),Z=({open:s,onClose:n})=>e.jsx(w,{title:"Tutorial",open:s,onClose:n,children:e.jsxs(c,{spacing:1,sx:{pl:.5},children:[e.jsx(d,{children:"You can see all positions on this page."}),e.jsx(d,{children:"Position can be assigned to executor"})]})}),{Create:_}=I,ee=({})=>{const{openModal:s,handleModalOpen:n,handleModalClose:t}=m(!1);return e.jsxs(M,{title:"Positions",children:[e.jsx(B,{onClick:n}),e.jsx(Z,{open:s,onClose:t}),e.jsx(k,{variant:"contained",to:_,children:"New"})]})},de=()=>e.jsxs(c,{sx:{height:"100%"},children:[e.jsx(ee,{}),e.jsx(X,{})]});export{de as default};
